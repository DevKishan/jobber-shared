{"version":3,"file":"logger.js","names":["_winston","_interopRequireDefault","require","_winstonElasticsearch","obj","__esModule","default","esTransformer","logData","ElasticsearchTransformer","winstonLogger","elasticsearchNode","name","level","options","console","handleExceptions","json","colorize","elasticsearch","tranformer","clientOpts","node","log","maxRetries","requestTimeout","sniffOnStart","consoleTransport","winston","transports","Console","esTransport","ElasticsearchTransport","logger","createLogger","exitOnError","defaultMeta","service","exports"],"sources":["../../src/logger.ts"],"sourcesContent":["import winston, { Logger, exitOnError } from 'winston';\nimport { ElasticsearchTransformer, ElasticsearchTransport, LogData, TransformedData } from 'winston-elasticsearch';\n\nconst esTransformer = ( logData: LogData ) : TransformedData => {\n    return ElasticsearchTransformer( logData );\n}\n\nexport const winstonLogger = ( elasticsearchNode:string, name:string, level:string ) : Logger => {\n    const options = {\n        console: {\n            level,\n            handleExceptions: true,\n            json: false,\n            colorize: true\n        },\n        elasticsearch: {\n            level,\n            tranformer: esTransformer,\n            clientOpts: {\n                node: elasticsearchNode,\n                log: level,\n                maxRetries: 2,\n                requestTimeout: 10000,\n                sniffOnStart: false\n            }\n        }\n    }\n\n    const consoleTransport:winston.transports.ConsoleTransportInstance = new winston.transports.Console(options.console);\n    const esTransport:ElasticsearchTransport = new ElasticsearchTransport( options.elasticsearch );\n    const logger:Logger = winston.createLogger({\n        exitOnError: false,\n        defaultMeta: {\n            service: name\n        },\n        transports: [ consoleTransport, esTransport ]\n    });\n\n    return logger;\n}"],"mappings":";;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,qBAAA,GAAAD,OAAA;AAAmH,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEnH,MAAMG,aAAa,GAAKC,OAAgB,IAAwB;EAC5D,OAAO,IAAAC,8CAAwB,EAAED,OAAQ,CAAC;AAC9C,CAAC;AAEM,MAAME,aAAa,GAAGA,CAAEC,iBAAwB,EAAEC,IAAW,EAAEC,KAAY,KAAe;EAC7F,MAAMC,OAAO,GAAG;IACZC,OAAO,EAAE;MACLF,KAAK;MACLG,gBAAgB,EAAE,IAAI;MACtBC,IAAI,EAAE,KAAK;MACXC,QAAQ,EAAE;IACd,CAAC;IACDC,aAAa,EAAE;MACXN,KAAK;MACLO,UAAU,EAAEb,aAAa;MACzBc,UAAU,EAAE;QACRC,IAAI,EAAEX,iBAAiB;QACvBY,GAAG,EAAEV,KAAK;QACVW,UAAU,EAAE,CAAC;QACbC,cAAc,EAAE,KAAK;QACrBC,YAAY,EAAE;MAClB;IACJ;EACJ,CAAC;EAED,MAAMC,gBAA4D,GAAG,IAAIC,gBAAO,CAACC,UAAU,CAACC,OAAO,CAAChB,OAAO,CAACC,OAAO,CAAC;EACpH,MAAMgB,WAAkC,GAAG,IAAIC,4CAAsB,CAAElB,OAAO,CAACK,aAAc,CAAC;EAC9F,MAAMc,MAAa,GAAGL,gBAAO,CAACM,YAAY,CAAC;IACvCC,WAAW,EAAE,KAAK;IAClBC,WAAW,EAAE;MACTC,OAAO,EAAEzB;IACb,CAAC;IACDiB,UAAU,EAAE,CAAEF,gBAAgB,EAAEI,WAAW;EAC/C,CAAC,CAAC;EAEF,OAAOE,MAAM;AACjB,CAAC;AAAAK,OAAA,CAAA5B,aAAA,GAAAA,aAAA","ignoreList":[]}