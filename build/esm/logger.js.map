{"version":3,"file":"logger.js","names":["winston","ElasticsearchTransformer","ElasticsearchTransport","esTransformer","logData","winstonLogger","elasticsearchNode","name","level","options","console","handleExceptions","json","colorize","elasticsearch","tranformer","clientOpts","node","log","maxRetries","requestTimeout","sniffOnStart","consoleTransport","transports","Console","esTransport","logger","createLogger","exitOnError","defaultMeta","service"],"sources":["../../src/logger.ts"],"sourcesContent":["import winston, { Logger, exitOnError } from 'winston';\nimport { ElasticsearchTransformer, ElasticsearchTransport, LogData, TransformedData } from 'winston-elasticsearch';\n\nconst esTransformer = ( logData: LogData ) : TransformedData => {\n    return ElasticsearchTransformer( logData );\n}\n\nexport const winstonLogger = ( elasticsearchNode:string, name:string, level:string ) : Logger => {\n    const options = {\n        console: {\n            level,\n            handleExceptions: true,\n            json: false,\n            colorize: true\n        },\n        elasticsearch: {\n            level,\n            tranformer: esTransformer,\n            clientOpts: {\n                node: elasticsearchNode,\n                log: level,\n                maxRetries: 2,\n                requestTimeout: 10000,\n                sniffOnStart: false\n            }\n        }\n    }\n\n    const consoleTransport:winston.transports.ConsoleTransportInstance = new winston.transports.Console(options.console);\n    const esTransport:ElasticsearchTransport = new ElasticsearchTransport( options.elasticsearch );\n    const logger:Logger = winston.createLogger({\n        exitOnError: false,\n        defaultMeta: {\n            service: name\n        },\n        transports: [ consoleTransport, esTransport ]\n    });\n\n    return logger;\n}"],"mappings":"AAAA,OAAOA,OAAO,MAA+B,SAAS;AACtD,SAASC,wBAAwB,EAAEC,sBAAsB,QAAkC,uBAAuB;AAElH,MAAMC,aAAa,GAAKC,OAAgB,IAAwB;EAC5D,OAAOH,wBAAwB,CAAEG,OAAQ,CAAC;AAC9C,CAAC;AAED,OAAO,MAAMC,aAAa,GAAGA,CAAEC,iBAAwB,EAAEC,IAAW,EAAEC,KAAY,KAAe;EAC7F,MAAMC,OAAO,GAAG;IACZC,OAAO,EAAE;MACLF,KAAK;MACLG,gBAAgB,EAAE,IAAI;MACtBC,IAAI,EAAE,KAAK;MACXC,QAAQ,EAAE;IACd,CAAC;IACDC,aAAa,EAAE;MACXN,KAAK;MACLO,UAAU,EAAEZ,aAAa;MACzBa,UAAU,EAAE;QACRC,IAAI,EAAEX,iBAAiB;QACvBY,GAAG,EAAEV,KAAK;QACVW,UAAU,EAAE,CAAC;QACbC,cAAc,EAAE,KAAK;QACrBC,YAAY,EAAE;MAClB;IACJ;EACJ,CAAC;EAED,MAAMC,gBAA4D,GAAG,IAAItB,OAAO,CAACuB,UAAU,CAACC,OAAO,CAACf,OAAO,CAACC,OAAO,CAAC;EACpH,MAAMe,WAAkC,GAAG,IAAIvB,sBAAsB,CAAEO,OAAO,CAACK,aAAc,CAAC;EAC9F,MAAMY,MAAa,GAAG1B,OAAO,CAAC2B,YAAY,CAAC;IACvCC,WAAW,EAAE,KAAK;IAClBC,WAAW,EAAE;MACTC,OAAO,EAAEvB;IACb,CAAC;IACDgB,UAAU,EAAE,CAAED,gBAAgB,EAAEG,WAAW;EAC/C,CAAC,CAAC;EAEF,OAAOC,MAAM;AACjB,CAAC","ignoreList":[]}